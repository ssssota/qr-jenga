import{J as K,K as O,L as W,S as Q,i as S,s as y,l as m,f as d,r as k,M as C,w as b,x as p,u as g,d as _,B as w,e as E,N as A,c as M,a as z,O as R,b as h,P as B,H as X,I as Y,p as F,Q as I,R as G,T as Z,U as N,V as J,W as x,X as $,k as ee,j as te,n as le,m as re,Y as q,o as se,v as ie}from"../chunks/vendor-adca7c21.js";const v=class extends K{constructor(r){super();this._text=r,this._removed=0,this._text||(this._text=Math.random().toString(36).substring(2));const e=O.create(this._text,{}).modules;this.matrix=[...Array(e.size)].map((a,s)=>[...Array(e.size)].map((c,u)=>!!e.get(u,s)))}get text(){return this._text}get size(){return this.matrix.length}get removed(){return this._removed}addEventListener(r,e){super.on(r,e)}get(r,e){return this.rangeCheck(r),this.rangeCheck(e),this.matrix[e][r]}remove(r,e){if(!this.get(r,e))throw new Error("Not able to remove black area");return this._removed++,this.matrix[e][r]=!1,this.validateQrCode()||this.emit("collapse"),this}rangeCheck(r){if(r>=this.size)throw new RangeError("Invalid index")}validateQrCode(){const r=W(this.toImageBuffer(),this.size*v.imageScale,this.size*v.imageScale);return(r==null?void 0:r.data)===this.text}toImageBuffer(){const r=this.matrix.flatMap(e=>{const a=e.map(s=>s?[0,0,0,255]:[255,255,255,255]).flatMap(s=>[...Array(v.imageScale)].flatMap(()=>[...s]));return[...Array(v.imageScale)].flatMap(()=>[...a])});return new Uint8ClampedArray(r)}};let j=v;j.imageScale=2;const ae=r=>new j(r);function L(r,e,a){const s=r.slice();return s[7]=e[a],s}function P(r,e,a){const s=r.slice();return s[10]=e[a],s}function U(r){let e,a,s,c,u,o,t;function i(){return r[6](r[10],r[7])}return{c(){e=A("rect"),this.h()},l(l){e=R(l,"rect",{fill:!0,x:!0,y:!0,width:!0,height:!0}),z(e).forEach(_),this.h()},h(){h(e,"fill","black"),h(e,"x",a=r[10]*r[0]),h(e,"y",s=r[7]*r[0]),h(e,"width",r[0]),h(e,"height",r[0])},m(l,n){d(l,e,n),u=!0,o||(t=J(e,"click",i),o=!0)},p(l,n){r=l,(!u||n&3&&a!==(a=r[10]*r[0]))&&h(e,"x",a),(!u||n&3&&s!==(s=r[7]*r[0]))&&h(e,"y",s),(!u||n&1)&&h(e,"width",r[0]),(!u||n&1)&&h(e,"height",r[0])},i(l){u||(c&&c.end(1),u=!0)},o(l){c=x(e,$,{}),u=!1},d(l){l&&_(e),l&&c&&c.end(),o=!1,t()}}}function D(r,e){let a,s=e[1].get(e[10],e[7]),c,u,o=s&&U(e);return{key:r,first:null,c(){a=m(),o&&o.c(),c=m(),this.h()},l(t){a=m(),o&&o.l(t),c=m(),this.h()},h(){this.first=a},m(t,i){d(t,a,i),o&&o.m(t,i),d(t,c,i),u=!0},p(t,i){e=t,i&2&&(s=e[1].get(e[10],e[7])),s?o?(o.p(e,i),i&2&&p(o,1)):(o=U(e),o.c(),p(o,1),o.m(c.parentNode,c)):o&&(k(),g(o,1,1,()=>{o=null}),b())},i(t){u||(p(o),u=!0)},o(t){g(o),u=!1},d(t){t&&_(a),o&&o.d(t),t&&_(c)}}}function T(r,e){let a,s=[],c=new Map,u,o,t=[...Array(e[1].size).keys()];const i=l=>`${l[10]},${l[7]}`;for(let l=0;l<t.length;l+=1){let n=P(e,t,l),f=i(n);c.set(f,s[l]=D(f,n))}return{key:r,first:null,c(){a=m();for(let l=0;l<s.length;l+=1)s[l].c();u=m(),this.h()},l(l){a=m();for(let n=0;n<s.length;n+=1)s[n].l(l);u=m(),this.h()},h(){this.first=a},m(l,n){d(l,a,n);for(let f=0;f<s.length;f+=1)s[f].m(l,n);d(l,u,n),o=!0},p(l,n){e=l,n&15&&(t=[...Array(e[1].size).keys()],k(),s=C(s,n,i,1,e,t,c,u.parentNode,N,D,u,P),b())},i(l){if(!o){for(let n=0;n<t.length;n+=1)p(s[n]);o=!0}},o(l){for(let n=0;n<s.length;n+=1)g(s[n]);o=!1},d(l){l&&_(a);for(let n=0;n<s.length;n+=1)s[n].d(l);l&&_(u)}}}function V(r){let e=[],a=new Map,s,c,u=[...Array(r[1].size).keys()];const o=t=>t[7];for(let t=0;t<u.length;t+=1){let i=L(r,u,t),l=o(i);a.set(l,e[t]=T(l,i))}return{c(){for(let t=0;t<e.length;t+=1)e[t].c();s=m()},l(t){for(let i=0;i<e.length;i+=1)e[i].l(t);s=m()},m(t,i){for(let l=0;l<e.length;l+=1)e[l].m(t,i);d(t,s,i),c=!0},p(t,i){i&15&&(u=[...Array(t[1].size).keys()],k(),e=C(e,i,o,1,t,u,a,s.parentNode,N,T,s,L),b())},i(t){if(!c){for(let i=0;i<u.length;i+=1)p(e[i]);c=!0}},o(t){for(let i=0;i<e.length;i+=1)g(e[i]);c=!1},d(t){for(let i=0;i<e.length;i+=1)e[i].d(t);t&&_(s)}}}function oe(r){let e,a,s=r[2],c,u,o=V(r),t=[r[4]],i={};for(let l=0;l<t.length;l+=1)i=w(i,t[l]);return{c(){e=E("div"),a=A("svg"),o.c(),this.h()},l(l){e=M(l,"DIV",{});var n=z(e);a=R(n,"svg",{version:!0,xmlns:!0,viewBox:!0,class:!0});var f=z(a);o.l(f),f.forEach(_),n.forEach(_),this.h()},h(){h(a,"version","1.1"),h(a,"xmlns","http://www.w3.org/2000/svg"),h(a,"viewBox",c="0 0 "+r[1].size*r[0]+" "+r[1].size*r[0]),h(a,"class","svelte-1ofrr86"),B(e,i)},m(l,n){d(l,e,n),X(e,a),o.m(a,null),u=!0},p(l,[n]){n&4&&y(s,s=l[2])?(k(),g(o,1,1,Y),b(),o=V(l),o.c(),p(o),o.m(a,null)):o.p(l,n),(!u||n&3&&c!==(c="0 0 "+l[1].size*l[0]+" "+l[1].size*l[0]))&&h(a,"viewBox",c),B(e,i=F(t,[n&16&&l[4]]))},i(l){u||(p(o),u=!0)},o(l){g(o),u=!1},d(l){l&&_(e),o.d(l)}}}function ne(r,e,a){const s=["text","blockSize"];let c=I(e,s),{text:u="default"}=e,{blockSize:o=100}=e;const t=G();let i=0,l;const n=(f,H)=>{l.remove(f,H),a(2,i++,i),t("removeblock")};return r.$$set=f=>{e=w(w({},e),Z(f)),a(4,c=I(e,s)),"text"in f&&a(5,u=f.text),"blockSize"in f&&a(0,o=f.blockSize)},r.$$.update=()=>{r.$$.dirty&34&&(a(1,l=ae(u)),a(2,i=0),l.addEventListener("collapse",()=>t("collapse")),t("reset"))},[o,l,i,t,c,u,n]}class ue extends Q{constructor(e){super();S(this,e,ne,oe,y,{text:5,blockSize:0})}}function ce(r){let e,a,s,c,u,o;return s=new ue({props:{text:r[0],style:"max-width: 90vmin; max-height: 90vmin; margin: 0 auto;"}}),s.$on("collapse",r[2]),s.$on("removeblock",r[3]),{c(){e=E("input"),a=ee(),te(s.$$.fragment),this.h()},l(t){e=M(t,"INPUT",{type:!0,placeholder:!0}),a=le(t),re(s.$$.fragment,t),this.h()},h(){h(e,"type","text"),h(e,"placeholder","QRcode text (random)")},m(t,i){d(t,e,i),q(e,r[0]),d(t,a,i),se(s,t,i),c=!0,u||(o=J(e,"input",r[1]),u=!0)},p(t,[i]){i&1&&e.value!==t[0]&&q(e,t[0]);const l={};i&1&&(l.text=t[0]),s.$set(l)},i(t){c||(p(s.$$.fragment,t),c=!0)},o(t){g(s.$$.fragment,t),c=!1},d(t){t&&_(e),t&&_(a),ie(s,t),u=!1,o()}}}function fe(r,e,a){let s="";function c(){s=this.value,a(0,s)}return[s,c,()=>alert(`
    \u208D\u208D\u207D\u207D\u{1F533}\u208E\u208E\u207E\u207E

\u898B\u3066\uFF01QR\u30B3\u30FC\u30C9\u304C\u8E0A\u3063\u3066\u3044\u308B\u3088
\u304B\u308F\u3044\u3044\u306D

        \u{1F533}

\u307F\u3093\u306A\u304CQR\u30B3\u30FC\u30C9\u306E\u9ED2\u3044\u90E8\u5206\u3092\u6D88\u3057\u3066\u3057\u307E\u3063\u305F\u306E\u3067\u3001QR\u30B3\u30FC\u30C9\u306F\u8E0A\u308B\u306E\u3092\u3084\u3081\u3066\u3057\u307E\u3044\u307E\u3057\u305F
\u304A\u524D\u306E\u305B\u3044\u3067\u3059
\u3042\u301C\u3042`),()=>console.log("block removed")]}class _e extends Q{constructor(e){super();S(this,e,fe,ce,y,{})}}export{_e as default};
